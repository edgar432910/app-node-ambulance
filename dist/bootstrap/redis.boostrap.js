"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const yenv_1=__importDefault(require("yenv")),ioredis_1=__importDefault(require("ioredis")),env=(0,yenv_1.default)();let client;class RedisBootstrap{initialize(){return new Promise(((e,t)=>{const i={host:env.DATABASES.REDIS.HOST,port:env.DATABASES.REDIS.PORT,password:""+env.DATABASES.REDIS.PASS,maxRetriesPerRequest:5};this.client=new ioredis_1.default(i),this.client.on("connect",(()=>{console.log("Connected to Redis"),e(!0)})).on("error",(e=>{t(e)})),client=this.client}))}close(){client&&client.disconnect()}getConnection(){return this.client}static async get(e){return await client.get(e)}static async set(e,t){await client.set(e,t,"PX",864e5)}static async clear(e=""){const t=await client.keys(`${e}*`);t.length>0&&await client.del(t)}}exports.default=RedisBootstrap;